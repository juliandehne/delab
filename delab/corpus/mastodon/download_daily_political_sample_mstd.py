from random import choice
from mastodon import Mastodon
from delab.corpus.mastodon.download_conversations_mastodon import download_conversations_mstd, download_conversations_to_search, create
from datetime import date, datetime

hashtags = [
    'politics',
    'currentaffairs',
    'news',
    'government',
    'worldnews',
    'elections',
    'voting',
    'democracy',
    'activism',
    'politicaldebate',
    'politicalnews',
    'politicalanalysis',
    'politicalissues',
    'publicpolicy',
    'leadership',
    'policy',
    'hottopics',
    'worldpolitics',
    'socialjustice',
    'humanrights',
    'climatechange',
    'equality',
    'economicpolicy',
    'immigration',
    'healthcare',
    'education',
    'technology',
    'environment',
    'sustainability',
    'corruption',
    'activist',
    'protest',
    'socialchange',
    'equalityforall',
    'politicalactivism',
    'conservative',
    'liberal',
    'republican',
    'democrat',
    'independent',
    'grassroots',
    'policereform',
    'guncontrol',
    'voterregistration',
    'civilrights',
    'womensrights',
    'racialjustice',
    'disabilityrights',
    'incomeinequality',
    'taxreform',
    'foreignrelations',
    'nationalsecurity',
    'waronterror',
    'peacebuilding',
    'diplomacy',
    'globalgovernance',
    'freespeech',
    'fakenews',
    'factchecking',
    'media',
    'journalism',
    'transparency',
    'lobbying',
    'electionfraud',
    'foreigninterference',
    'votingrights',
    'electoralreform',
    'politicalasylum',
    'refugeecrisis',
    'bordersecurity',
    'cleanenergy',
    'sustainabledevelopment',
    'educationreform',
    'edtech',
    'healthcarereform',
    'mentalhealth',
    'pandemicresponse',
    'technologyethics',
    'dataprivacy',
    'surveillance',
    'cybersecurity',
    'environmentaljustice',
    'ecology',
    'sustainableliving',
    'corporategovernance',
    'ethics',
    'consumerprotection',
    'urbanplanning',
    'rurallife',
    'BLM',
    'balcklivesmatter',
    'pride',
    'LBTQIA+',
    'translivesmatter',
    'transphobia',
    'accountability',
    'queer',
    'LGBT',
    'BlackTransLivesMatter',
    'AffordableHousing',
    "Progressive",
    "SocialJustice",
    "TaxTheRich",
    "MedicareForAll",
    "ClimateAction",
    "BlackLivesMatter",
    "FightFor15",
    "GreenNewDeal",
    "UniversalHealthcare",
    "DefundThePolice",
    "LGBTQRights",
    "EqualityForAll",
    "WorkersRights",
    "FreeCollege",
    "WomenEmpowerment",
    "IncomeInequality",
    "EnvironmentalJustice",
    "AbolishICE",
    "ReproductiveRights",
    "EndCorporateGreed",
    'refugeeswelcome',
    "Conservative",
    "MAGA",
    "ProLife",
    "2A",
    "TaxReform",
    "BorderSecurity",
    "FreeMarket",
    "SchoolChoice",
    "TraditionalValues",
    "ReligiousFreedom",
    "NationalSecurity",
    "DefendThePolice",
    "LowerTaxes",
    "LimitedGovernment",
    "AmericaFirst",
    "IndividualLiberty",
    "RightToBearArms",
    "ProFamily",
    "EconomicFreedom",
    "Capitalism"]


def download_daily_political_sample_mstd(topic_string):
    hashtag = choice(hashtags)
    today = datetime.now()
    midnight = today.replace(hour=0, minute=0, second=0, microsecond=0)
    #download_conversations_mstd(query=hashtag, topic=topic_string, since=midnight, daily_sample=True)
    mastodon = create()
    downloaded_trees = download_conversations_to_search(query=hashtag, mastodon=mastodon, topic=topic_string,
                                                        since=midnight, daily_sample=True)

    return downloaded_trees
