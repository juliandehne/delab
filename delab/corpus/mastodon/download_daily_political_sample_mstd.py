from random import choice
from mastodon import Mastodon
from delab.corpus.mastodon.download_conversations_mastodon import download_conversations_mstd, download_conversations_to_search
from delab.tw_connection_util import create_mastodon
from datetime import datetime, timedelta
from delab.delab_enums import LANGUAGE

hashtags = [
    'politics',
    'currentaffairs',
    'news',
    'government',
    'worldnews',
    'elections',
    'voting',
    'democracy',
    'activism',
    'politicaldebate',
    'politicalnews',
    'politicalanalysis',
    'politicalissues',
    'publicpolicy',
    'leadership',
    'policy',
    'hottopics',
    'worldpolitics',
    'socialjustice',
    'humanrights',
    'climatechange',
    'equality',
    'economicpolicy',
    'immigration',
    'healthcare',
    'education',
    'technology',
    'environment',
    'sustainability',
    'corruption',
    'activist',
    'protest',
    'socialchange',
    'equalityforall',
    'politicalactivism',
    'conservative',
    'liberal',
    'republican',
    'democrat',
    'independent',
    'grassroots',
    'policereform',
    'guncontrol',
    'voterregistration',
    'civilrights',
    'womensrights',
    'racialjustice',
    'disabilityrights',
    'incomeinequality',
    'taxreform',
    'foreignrelations',
    'nationalsecurity',
    'waronterror',
    'peacebuilding',
    'diplomacy',
    'globalgovernance',
    'freespeech',
    'fakenews',
    'factchecking',
    'media',
    'journalism',
    'transparency',
    'lobbying',
    'electionfraud',
    'foreigninterference',
    'votingrights',
    'electoralreform',
    'politicalasylum',
    'refugeecrisis',
    'bordersecurity',
    'cleanenergy',
    'sustainabledevelopment',
    'educationreform',
    'edtech',
    'healthcarereform',
    'mentalhealth',
    'pandemicresponse',
    'technologyethics',
    'dataprivacy',
    'surveillance',
    'cybersecurity',
    'environmentaljustice',
    'ecology',
    'sustainableliving',
    'corporategovernance',
    'ethics',
    'consumerprotection',
    'urbanplanning',
    'rurallife',
    'BLM',
    'balcklivesmatter',
    'pride',
    'LBTQIA+',
    'translivesmatter',
    'transphobia',
    'accountability',
    'queer',
    'LGBT',
    'BlackTransLivesMatter',
    'AffordableHousing',
    "Progressive",
    "SocialJustice",
    "TaxTheRich",
    "MedicareForAll",
    "ClimateAction",
    "BlackLivesMatter",
    "FightFor15",
    "GreenNewDeal",
    "UniversalHealthcare",
    "DefundThePolice",
    "LGBTQRights",
    "EqualityForAll",
    "WorkersRights",
    "FreeCollege",
    "WomenEmpowerment",
    "IncomeInequality",
    "EnvironmentalJustice",
    "AbolishICE",
    "ReproductiveRights",
    "EndCorporateGreed",
    'refugeeswelcome',
    "Conservative",
    "MAGA",
    "ProLife",
    "2A",
    "TaxReform",
    "BorderSecurity",
    "FreeMarket",
    "SchoolChoice",
    "TraditionalValues",
    "ReligiousFreedom",
    "NationalSecurity",
    "DefendThePolice",
    "LowerTaxes",
    "LimitedGovernment",
    "AmericaFirst",
    "IndividualLiberty",
    "RightToBearArms",
    "ProFamily",
    "EconomicFreedom",
    "Capitalism"]

german_hashtags = [
    "Politik",
    "Bundestagswahl",
    "Bundestag",
    "Bundesregierung",
    "Wahlen",
    "Parteien",
    "Demokratie",
    "Europa",
    "Klimapolitik",
    "Flüchtlinge",
    "Asyl",
    "Corona",
    "Gesundheitspolitik",
    "Wirtschaftspolitik",
    "Arbeit",
    "Soziales",
    "Umwelt",
    "Bildung",
    "Digitalisierung",
    "Kriminalität",
    "Sicherheit",
    "Familienpolitik",
    "Energiepolitik",
    "Landwirtschaft",
    "Steuern",
    "Außenpolitik",
    "Integration",
    "Gleichberechtigung",
    "Grundrechte",
    "Meinungsfreiheit",
    "Linke",
    "SPD",
    "DieGrünen",
    "Sozialdemokratie",
    "Antikapitalismus",
    "Solidarität",
    "Gerechtigkeit",
    "Arbeitnehmerrechte",
    "Gleichheit",
    "Umweltschutz",
    "Klimagerechtigkeit",
    "Feminismus",
    "Bildungsgerechtigkeit",
    "Sozialstaat",
    "BGE",
    "Antirassismus",
    "Asylrecht",
    "Demokratie",
    "Frieden",
    "Linksjugend",
    "SolidarischeÖkonomie",
    "Mindestlohn",
    "Kollektiveigentum",
    "Antifa",
    "KampfgegenRechts",
    "Protest",
    "Globalisierungskritik",
    "Widerstand",
    "Bündnis90DieGrünen",
    "Ökosozialismus",
    "CDU",
    "CSU",
    "AfD",
    "Konservativ",
    "Werte",
    "Heimat",
    "Familie",
    "Religion",
    "Tradition",
    "Sicherheit",
    "Nationalismus",
    "Patriotismus",
    "GesetzundOrdnung",
    "Marktwirtschaft",
    "Freiheit",
    "Migrationspolitik",
    "Asylpolitik",
    "Grenzschutz",
    "Bildung",
    "Wirtschaftswachstum",
    "Steuersenkungen",
    "Arbeitsmarkt",
    "Energiewende",
    "Klimaskeptiker"
]


def download_daily_political_sample_mstd(topic_string, lang):
    if lang == LANGUAGE.GERMAN:
        hashtag = choice(german_hashtags)
    else:
        hashtag = choice(hashtags)
    # toots in the last 24 hours
    today = datetime.now()
    yesterday = today - timedelta(days=1)
    mastodon = create_mastodon()
    downloaded_trees = download_conversations_to_search(query=hashtag, mastodon=mastodon, topic=topic_string,
                                                        since=yesterday, daily_sample=True)

    return downloaded_trees
